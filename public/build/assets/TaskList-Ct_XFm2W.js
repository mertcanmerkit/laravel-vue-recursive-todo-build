import{_ as W,d as q,r as b,c as u,o as l,a as e,b as S,e as v,n as M,t as f,f as A,u as C,F as T,g as I,h as L,i as P,j as H,k as X,l as h,m as Y,p as Z,q as ee,w as te,s as U,v as E,x as K,y as se,z as V,A as D,B as ae}from"./app-BPt5GZHX.js";/* empty css            */const ne={class:"task-card"},oe={class:"task-body d-flex justify-content-between"},le={class:"d-flex align-items-start"},ie=["checked"],re={class:"mt-1 d-flex flex-wrap align-items-center"},ue={class:"task-action-buttons flex-shrink-0 mt-1 text-end"},de={key:0,class:"list-group mt-2 ms-4 subs"},ce={__name:"TaskItem",props:["task"],emits:["refresh","add-subtask","edit-task"],setup(o,{emit:_}){const p=o,k=_,x=q.useToast(),c=b(!1),g=async()=>{await h.put(`/api/lists/${p.task.todo_list_id}/tasks/${p.task.id}`,{is_completed:!p.task.is_completed}),k("refresh")},d=()=>{c.value=!0},m=async()=>{await h.delete(`/api/lists/${p.task.todo_list_id}/tasks/${p.task.id}`),k("refresh"),x.success("Task deleted."),c.value=!1},w=s=>{switch(s){case"high":return"bg-danger";case"medium":return"bg-warning";case"low":return"bg-success";default:return"bg-secondary"}};return(s,n)=>(l(),u("li",ne,[e("div",oe,[e("div",le,[e("input",{type:"checkbox",checked:o.task.is_completed,onChange:g,class:"form-check-input me-3 mt-1"},null,40,ie),e("div",null,[e("div",{class:M(["fw-semibold text-break",{"text-decoration-line-through":o.task.is_completed}])},f(o.task.name),3),e("div",re,[e("span",{class:M(["badge me-2",w(o.task.priority)])},[v(C(T),{icon:"flag",class:"me-1"}),A(" "+f(o.task.priority),1)],2),(l(!0),u(I,null,L(o.task.labels,r=>(l(),u("span",{key:r.name,class:"badge label-badge me-2",style:P({backgroundColor:r.bg_color})},f(r.name),5))),128))])])]),e("div",ue,[e("button",{class:"btn btn-sm text-secondary me-2",onClick:n[0]||(n[0]=r=>s.$emit("edit-task",o.task))},[v(C(T),{icon:"edit"})]),e("button",{class:"btn btn-sm text-danger me-2",onClick:d},[v(C(T),{icon:"trash"})]),e("button",{class:"btn btn-sm text-primary",onClick:n[1]||(n[1]=r=>s.$emit("add-subtask",o.task.id))},[v(C(T),{icon:"arrow-turn-down",flip:"horizontal"})])])]),o.task.children&&o.task.children.length?(l(),u("ul",de,[(l(!0),u(I,null,L(o.task.children,r=>(l(),H(G,{key:r.id,task:r,onRefresh:n[2]||(n[2]=y=>s.$emit("refresh")),onAddSubtask:n[3]||(n[3]=y=>s.$emit("add-subtask",y)),onEditTask:n[4]||(n[4]=y=>s.$emit("edit-task",y))},null,8,["task"]))),128))])):S("",!0),v(X,{visible:c.value,title:"Delete Task",message:"Are you sure you want to delete this task?","confirm-text":"Delete","cancel-text":"Cancel",onConfirm:m,onCancel:n[5]||(n[5]=r=>c.value=!1)},null,8,["visible"])]))}},G=W(ce,[["__scopeId","data-v-91102640"]]),me={class:"container mt-5"},be={class:"d-lg-flex justify-content-between align-items-end mb-3"},pe={class:"flex-shrink-0"},ke={key:0,class:"text-muted"},ve={class:"list-group"},fe={key:1,class:"modal-backdrop"},ge={class:"modal-content p-4 bg-white border rounded shadow-sm",style:{"max-width":"500px",margin:"100px auto"}},ye={class:"input-group"},he={class:"d-flex flex-wrap mb-2"},we=["onClick"],_e=["onKeydown"],xe={class:"d-flex justify-content-end mt-3"},Me={__name:"TaskList",setup(o){const _=q.useToast(),p=Y();ae();const k=p.params.listId,x=b(""),c=b([]),g=b(!1),d=b(""),m=b(!1),w=b(null),s=b({name:"",priority:"low",parent_id:null,label_names:[]}),n=async()=>{const a=await h.get(`/api/lists/${k}/tasks`);c.value=a.data},r=async()=>{const a=await h.get(`/api/lists/${k}`);x.value=a.data.name},y=async()=>{m.value?(await h.put(`/api/lists/${k}/tasks/${w.value}`,s.value),_.success("Task updated successfully.")):(await h.post(`/api/lists/${k}/tasks`,s.value),_.success("Task created successfully.")),await n(),F()},B=(a=null)=>{s.value={name:"",priority:"low",parent_id:a,label_names:[]},d.value="",g.value=!0,m.value=!1},J=a=>{w.value=a.id,s.value={name:a.name,priority:a.priority,parent_id:a.parent_id,label_names:a.labels.map(t=>({name:t.name,bg_color:t.bg_color}))},d.value="",m.value=!0,g.value=!0},j=Z(()=>{switch(s.value.priority){case"high":return"bg-danger";case"medium":return"bg-warning";case"low":return"bg-success";default:return""}}),O=()=>{const a=Math.floor(Math.random()*360),t=70+Math.random()*10,$=55+Math.random()*10;return`hsl(${a}, ${t}%, ${$}%)`},z=()=>{const a=d.value.split(/,|\n/).map(t=>t.trim()).filter(t=>t.length>0);for(const t of a)s.value.label_names.find(N=>N.name===t)||s.value.label_names.push({name:t,bg_color:O()});d.value=""},Q=a=>{s.value.label_names.splice(a,1)},F=()=>{s.value={name:"",priority:"low",parent_id:null,label_names:[]},d.value="",g.value=!1,m.value=!1,w.value=null};return ee(()=>{r(),n()}),(a,t)=>{const $=U("router-link"),N=U("font-awesome-icon");return l(),u("div",me,[e("div",be,[e("h2",null,f(x.value),1),e("div",pe,[v($,{to:"/",class:"btn btn-outline-secondary btn-sm me-2"},{default:te(()=>t[5]||(t[5]=[A("← My Lists")])),_:1}),e("button",{class:"btn btn-sm btn-primary",onClick:t[0]||(t[0]=i=>B())},"New Task")])]),c.value.length===0?(l(),u("div",ke,"No tasks found.")):S("",!0),e("ul",ve,[(l(!0),u(I,null,L(c.value,i=>(l(),H(G,{key:i.id,task:i,onRefresh:n,onAddSubtask:B,onEditTask:J},null,8,["task"]))),128))]),g.value?(l(),u("div",fe,[e("div",ge,[e("h5",null,f(m.value?"Edit Task":"Create Task"),1),E(e("input",{"onUpdate:modelValue":t[1]||(t[1]=i=>s.value.name=i),class:"form-control my-2",placeholder:"Task name"},null,512),[[K,s.value.name]]),t[7]||(t[7]=e("label",{class:"form-label mt-3"},"Priority",-1)),e("div",ye,[e("span",{class:M(["input-group-text border-0 text-white",j.value])},[v(N,{icon:"flag"})],2),E(e("select",{"onUpdate:modelValue":t[2]||(t[2]=i=>s.value.priority=i),class:M(["form-select border-0 text-white no-arrow",j.value]),style:{outline:"none","box-shadow":"none"}},t[6]||(t[6]=[e("option",{disabled:"",value:""},"Select priority",-1),e("option",{value:"low"},"Low",-1),e("option",{value:"medium"},"Medium",-1),e("option",{value:"high"},"High",-1)]),2),[[se,s.value.priority]])]),t[8]||(t[8]=e("label",{class:"mt-2"},"Labels",-1)),e("div",he,[(l(!0),u(I,null,L(s.value.label_names,(i,R)=>(l(),u("span",{key:R,class:"badge me-2 mb-2",style:P({backgroundColor:i.bg_color,color:"#fff"})},[A(f(i.name)+" ",1),e("button",{type:"button",class:"btn-close btn-close-white btn-sm ms-2",onClick:$e=>Q(R)},null,8,we)],4))),128))]),E(e("input",{"onUpdate:modelValue":t[3]||(t[3]=i=>d.value=i),class:"form-control",placeholder:"Type label and press enter or comma",onKeydown:[V(D(z,["prevent"]),["enter"]),V(D(z,["prevent"]),[","]),t[4]||(t[4]=V(D(()=>{},["exact","prevent"]),["space"]))]},null,40,_e),[[K,d.value]]),e("div",xe,[e("button",{class:"btn btn-secondary me-2",onClick:F},"Cancel"),e("button",{class:"btn btn-primary",onClick:y},f(m.value?"Update":"Create"),1)])])])):S("",!0)])}}};export{Me as default};
